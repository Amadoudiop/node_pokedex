{"version":3,"sources":["../../../server/routes/pokemons.js"],"names":["express","require","Pokemon","errorManager","router","Router","getPokemons","req","res","find","then","json","result","catch","error500","err","getPokemon","findById","params","id","status","send","createPokemon","p","body","console","log","newPokemon","save","editPokemon","name","type","niveau","img","evolution","pokemon","deletePokemon","findByIdAndRemove","response","message","_id","get","post","put","patch","delete","module","exports"],"mappings":"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","file":"pokemons.js","sourcesContent":["const express = require('express')\n// const _ = require('lodash')\nconst Pokemon = require('../models/Pokemon')\nconst errorManager = require('../helpers/request-api-error')\n\nconst router = express.Router()\n\nconst getPokemons = (req, res) => {\n    Pokemon.find()\n        .then(result => res.json(result))\n        .catch(err => errorManager.error500(res, err))\n}\n\nconst getPokemon = (req, res) => {\n    Pokemon.findById(req.params.id, (err, Pokemon) => {\n        if (err) {\n            res.status(500).send(err)\n        }\n        if (Pokemon) {\n            res.status(200).send(Pokemon)\n        } else {\n            res.status(404).send(\"No Pokemon found with that ID\")\n        }\n    });\n}\n\nconst createPokemon = (req, res) => {\n    const p = req.body\n    if(req) console.log(req.body)\n    const newPokemon = new Pokemon(p)\n    newPokemon.save().then((Pokemon) => {\n        res.json(Pokemon)\n    }).catch(err => errorManager.error500(res, err))\n}\n\nconst editPokemon = (req, res) => {\n    Pokemon.findById(req.params.id, (err, Pokemon) => {\n        if (err) {\n            res.status(500).send(err);\n        } else {\n            Pokemon.name = req.body.name || Pokemon.name;\n            Pokemon.type = req.body.type || Pokemon.type;\n            Pokemon.niveau = req.body.niveau || Pokemon.niveau;\n            Pokemon.img = req.body.img || Pokemon.img;\n            console.log(typeof Pokemon.evolution);\n            if(req.body.evolution) Pokemon.evolution = [ ];\n            Pokemon.evolution = req.body.evolution || Pokemon.evolution ;\n\n            Pokemon.save((err, pokemon) => {\n                if (err) {\n                    res.status(500).send(err)\n                }\n                res.status(200).send(pokemon);\n            });\n        }\n    })\n}\n\nconst deletePokemon = (req, res) => {\n    Pokemon.findByIdAndRemove(req.params.id, (err, Pokemon) => {\n        let response = {\n            message: \"Pokemon successfully deleted\",\n            id: Pokemon._id\n        };\n        res.status(200).send(response);\n    });\n}\n\n\nrouter.get('/', getPokemons)\nrouter.get('/:id', getPokemon)\nrouter.post('/', createPokemon)\nrouter.put('/:id',  editPokemon)\nrouter.patch('/:id',  editPokemon)\nrouter.delete('/:id', deletePokemon)\n\nmodule.exports = router"]}